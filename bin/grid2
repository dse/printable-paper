#!/usr/bin/env perl
use warnings;
use strict;
use v5.10.0;

use FindBin;
use lib "${FindBin::Bin}/../lib";

use My::Printable::Paper::2::Paper;

my $paper = My::Printable::Paper::2::Paper->new(
    size => 'half-letter',
    basename => 'paper',
);
$paper->clipLeft(13.5);
$paper->clipRight(13.5);
$paper->clipTop(13.5);
$paper->clipBottom(13.5);

my $majorLineType = $paper->addLineType(
    id => 'major',
    width => '2 printerdots',
);
my $minorLineType = $paper->addLineType(
    id => 'minor',
    width => '1 printerdot',
    style => 'dashed',
    dots => 2,
    dashes => 2,
);
my $marginLineType = $paper->addLineType(
    id => 'margin',
    width => '4 printerdots',
    stroke => 'red',
);

my $majorGridX = $paper->addXPointSeries(
    id => 'major-x',
    shiftPoints => 1,
);
my $majorGridY = $paper->addYPointSeries(
    id => 'major-y',
    shiftPoints => 1,
);
$majorGridX->compute();
$majorGridY->compute();

my $minorGridX = $paper->addXPointSeries(
    id => 'minor-x',
    step => '1/3 gridunit',
    origin => $majorGridX->computedOrigin,
);
my $minorGridY = $paper->addYPointSeries(
    id => 'minor-y',
    step => '1/3 gridunit',
    origin => $majorGridY->computedOrigin,
);
$minorGridX->compute();
$minorGridY->compute();

$paper->startSVG();

$paper->drawGrid(
    id => 'major-grid',
    x => $majorGridX,
    y => $majorGridY,
    lineType => 'major',
);
$paper->drawGrid(
    id => 'minor-grid',
    x => $minorGridX,
    y => $minorGridY,
    lineType => 'minor',
);
$paper->drawVerticalLines(
    id => 'left-margin-line',
    x => $majorGridX->nearest('0.75in'),
    lineType => 'margin',
);
$paper->drawHorizontalLines(
    id => 'top-margin-line',
    y => $majorGridY->nearest('0.75in'),
    lineType => 'margin',
);

$paper->endSVG();

$paper->writeSVG();
$paper->writePDF(nUp => 2, nPages => 2);
# $paper->writePS(1, 1);
# $paper->writePS(1, 2);
# $paper->writePS(2, 1);
# $paper->writePS(2, 2);
# $paper->writePS(4, 1);
# $paper->writePS(4, 2);
# $paper->writePDF(1, 1);
# $paper->writePDF(1, 2);
# $paper->writePDF(2, 1);
# $paper->writePDF(2, 2);
# $paper->writePDF(4, 1);
# $paper->writePDF(4, 2);
